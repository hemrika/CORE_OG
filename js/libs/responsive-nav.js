// *** responsive-nav.js 1.0.39
// https://github.com/viljamis/responsive-nav.js
// http://responsive-nav.com
// Copyright (c) 2015 @viljamis        
(function(a,d,b){var c=function(f,h){var g=!!d.getComputedStyle;if(!g){d.getComputedStyle=function(A){this.el=A;this.getPropertyValue=function(C){var B=/(\-([a-z]){1})/g;if(C==="float"){C="styleFloat"}if(B.test(C)){C=C.replace(B,function(){return arguments[2].toUpperCase()})}return A.currentStyle[C]?A.currentStyle[C]:null};return this}}var s=function(D,B,C,A){if("addEventListener" in D){try{D.addEventListener(B,C,A)}catch(E){if(typeof C==="object"&&C.handleEvent){D.addEventListener(B,function(F){C.handleEvent.call(C,F)},A)}else{throw E}}}else{if("attachEvent" in D){if(typeof C==="object"&&C.handleEvent){D.attachEvent("on"+B,function(){C.handleEvent.call(C)})}else{D.attachEvent("on"+B,C)}}}},t=function(D,B,C,A){if("removeEventListener" in D){try{D.removeEventListener(B,C,A)}catch(E){if(typeof C==="object"&&C.handleEvent){D.removeEventListener(B,function(F){C.handleEvent.call(C,F)},A)}else{throw E}}}else{if("detachEvent" in D){if(typeof C==="object"&&C.handleEvent){D.detachEvent("on"+B,function(){C.handleEvent.call(C)})}else{D.detachEvent("on"+B,C)}}}},i=function(C){if(C.children.length<1){throw new Error("The Nav container has no containing elements")}var B=[];for(var A=0;A<C.children.length;A++){if(C.children[A].nodeType===1){B.push(C.children[A])}}return B},u=function(C,A){for(var B in A){C.setAttribute(B,A[B])}},m=function(B,A){if(B.className.indexOf(A)!==0){B.className+=" "+A;B.className=B.className.replace(/(^\s*)|(\s*$)/g,"")}},q=function(C,A){var B=new RegExp("(\\s|^)"+A+"(\\s|$)");C.className=C.className.replace(B," ").replace(/(^\s*)|(\s*$)/g,"")},v=function(D,C,B){for(var A=0;A<D.length;A++){C.call(B,A,D[A])}},e=function(B,A){return B.className&&new RegExp("(\\s|^)"+A+"(\\s|$)").test(B.className)},x=function(){var A=this,B=p.menuItems;while(-1===A.className.indexOf(B)){if("li"===A.tagName.toLowerCase()){if(-1!==A.className.indexOf("focus")){A.className=A.className.replace(" focus","")}else{A.className+=" focus"}}A=A.parentElement}};var k,p,j,z=a.createElement("style"),l=a.documentElement,y,r,w,o;var n=function(C,A){var B;this.options={animate:true,transition:284,label:"Menu",insert:"before",customToggle:"",closeOnNavClick:false,openPos:"relative",navClass:"nav-collapse",navActiveClass:"js-nav-active",jsClass:"js",enableFocus:false,enableDropdown:false,menuItems:"menu-items",subMenu:"sub-menu",openDropdown:"Open sub menu",closeDropdown:"Close sub menu",init:function(){},open:function(){},close:function(){},resizeMobile:function(){},resizeDesktop:function(){}};for(B in A){this.options[B]=A[B]}m(l,this.options.jsClass);this.wrapperEl=C.replace("#","");if(a.getElementById(this.wrapperEl)){this.wrapper=a.getElementById(this.wrapperEl)}else{if(a.querySelector(this.wrapperEl)){this.wrapper=a.querySelector(this.wrapperEl)}else{throw new Error("The nav element you are trying to select doesn't exist")}}this.wrapper.inner=i(this.wrapper);p=this.options;k=this.wrapper;this._init(this)};n.prototype={destroy:function(){this._removeStyles();q(k,"closed");q(k,"opened");q(k,p.navClass);q(k,p.navClass+"-"+this.index);q(l,p.navActiveClass);k.removeAttribute("style");k.removeAttribute("aria-hidden");t(d,"resize",this,false);t(d,"focus",this,false);t(a.body,"touchmove",this,false);t(j,"touchstart",this,false);t(j,"touchend",this,false);t(j,"mouseup",this,false);t(j,"keyup",this,false);t(j,"click",this,false);if(!p.customToggle){j.parentNode.removeChild(j)}else{j.removeAttribute("aria-hidden")}if(p.enableDropdown){var A=this;v(o,function(B,C){t(C,"touchstart",A,false);t(C,"touchend",A,false);t(C,"mouseup",A,false);t(C,"keyup",A,false);t(C,"click",A,false)})}},toggle:function(){if(y===true){if(!w){this.open()}else{this.close()}}},open:function(){if(!w){q(k,"closed");m(k,"opened");m(l,p.navActiveClass);m(j,"active");k.style.position=p.openPos;u(k,{"aria-hidden":"false"});u(k,{"aria-expanded":"true"});u(j,{"aria-expanded":"true"});w=true;p.open()}},close:function(){if(w){m(k,"closed");q(k,"opened");q(l,p.navActiveClass);q(j,"active");u(k,{"aria-hidden":"true"});u(k,{"aria-expanded":"false"});u(j,{"aria-expanded":"false"});if(p.animate){y=false;setTimeout(function(){k.style.position="absolute";y=true;if(p.enableDropdown){q(k,"dropdown-active");v(o,function(A,B){q(B,"toggled");q(B.nextSibling,"toggled")})}},p.transition+10)}else{k.style.position="absolute";if(p.enableDropdown){q(k,"dropdown-active");v(o,function(A,B){q(B,"toggled");q(B.nextSibling,"toggled")})}}w=false;p.close()}},resize:function(){if(d.getComputedStyle(j,null).getPropertyValue("display")!=="none"){r=true;u(j,{"aria-hidden":"false"});u(k,{"aria-expanded":"false"});u(j,{"aria-expanded":"false"});if(k.className.match(/(^|\s)closed(\s|$)/)){u(k,{"aria-hidden":"true"});k.style.position="absolute"}if(!k.className.match(/(^|\s)closed(\s|$)/)){u(k,{"aria-expanded":"true"});u(j,{"aria-expanded":"true"})}this._createStyles();this._calcHeight();p.resizeMobile()}else{r=false;u(j,{"aria-hidden":"true"});u(k,{"aria-hidden":"false"});k.removeAttribute("aria-expanded");j.removeAttribute("aria-expanded");k.style.position=p.openPos;this._removeStyles();p.resizeDesktop()}},handleEvent:function(B){var A=B||d.event;switch(A.type){case"touchstart":this._onTouchStart(A);break;case"touchmove":this._onTouchMove(A);break;case"touchend":case"mouseup":this._onTouchEnd(A);break;case"click":this._preventDefault(A);break;case"keyup":this._onKeyUp(A);break;case"focus":case"resize":this.resize(A);break}},_init:function(){this.index=b++;m(k,p.navClass);m(k,p.navClass+"-"+this.index);m(k,"closed");y=true;w=false;this._closeOnNavClick();this._createToggle();this._transitions();this.resize();this._createFocus();this._createDropdown();var A=this;setTimeout(function(){A.resize()},20);s(d,"resize",this,false);s(d,"focus",this,false);s(a.body,"touchmove",this,false);s(j,"touchstart",this,false);s(j,"touchend",this,false);s(j,"mouseup",this,false);s(j,"keyup",this,false);s(j,"click",this,false);p.init()},_createStyles:function(){if(!z.parentNode){z.type="text/css";a.getElementsByTagName("head")[0].appendChild(z)}},_removeStyles:function(){if(z.parentNode){z.parentNode.removeChild(z)}},_createToggle:function(){if(!p.customToggle){var B=a.createElement("a");B.innerHTML=p.label;u(B,{href:"#","class":"nav-toggle"});if(p.insert==="after"){k.parentNode.insertBefore(B,k.nextSibling)}else{k.parentNode.insertBefore(B,k)}j=B}else{var A=p.customToggle.replace("#","");if(a.getElementById(A)){j=a.getElementById(A)}else{if(a.querySelector(A)){j=a.querySelector(A)}else{throw new Error("The custom nav toggle you are trying to select doesn't exist")}}}},_closeOnNavClick:function(){if(p.closeOnNavClick){var B=k.getElementsByTagName("a"),A=this;v(B,function(C,D){s(B[C],"click",function(){if(r){A.toggle()}},false)})}},_preventDefault:function(A){if(A.preventDefault){if(A.stopImmediatePropagation){A.stopImmediatePropagation()}A.preventDefault();A.stopPropagation();return false}else{A.returnValue=false}},_onTouchStart:function(A){if(!Event.prototype.stopImmediatePropagation){this._preventDefault(A)}this.startX=A.touches[0].clientX;this.startY=A.touches[0].clientY;this.touchHasMoved=false;t(j,"mouseup",this,false)},_onTouchMove:function(A){if(Math.abs(A.touches[0].clientX-this.startX)>10||Math.abs(A.touches[0].clientY-this.startY)>10){this.touchHasMoved=true}},_onTouchEnd:function(D){this._preventDefault(D);if(!r){return}var A=D||d.event,E=A.target||A.srcElement,C=false;if(e(E,"dropdown-toggle")&&p.enableDropdown){C=true}if(!this.touchHasMoved){if(D.type==="touchend"){if(C){this._toggleDropdown(E)}else{this.toggle()}return}else{var B=D||d.event;if(!(B.which===3||B.button===2)){if(C){this._toggleDropdown(E)}else{this.toggle()}}}}},_onKeyUp:function(C){var A=C||d.event,D=C.target,B=false;if(e(D,"dropdown-toggle")&&p.enableDropdown){B=true}if(A.keyCode===13){if(B){this._toggleDropdown(D)}else{this.toggle()}}},_transitions:function(){if(p.animate){var A=k.style,B="max-height "+p.transition+"ms";A.WebkitTransition=A.MozTransition=A.OTransition=A.transition=B}},_calcHeight:function(){var C=0;for(var B=0;B<k.inner.length;B++){C+=k.inner[B].offsetHeight}var A="."+p.jsClass+" ."+p.navClass+"-"+this.index+".opened{max-height:"+C+"px !important} ."+p.jsClass+" ."+p.navClass+"-"+this.index+".opened.dropdown-active {max-height:9999px !important}";if(z.styleSheet){z.styleSheet.cssText=A}else{z.innerHTML=A}A=""},_createFocus:function(){if(!p.enableFocus){return}var D=k.getElementsByTagName("ul")[0],B=D.getElementsByTagName("a"),A,C;for(C=0,A=B.length;C<A;C++){B[C].addEventListener("focus",x,true);B[C].addEventListener("blur",x,true)}},_createDropdown:function(){if(!p.enableDropdown){return}var B=this;var E=k.getElementsByTagName("ul")[0],D=E.getElementsByTagName("ul"),C,A;m(k,"multiple-level-nav");for(C=0,A=D.length;C<A;C++){D[C].parentNode.setAttribute("aria-haspopup","true");D[C].insertAdjacentHTML("beforebegin",'<button class="dropdown-toggle" aria-expanded="false">'+p.openDropdown+"</button>")}o=k.querySelectorAll(".dropdown-toggle");v(o,function(F,G){s(G,"touchstart",B,false);s(G,"touchend",B,false);s(G,"mouseup",B,false);s(G,"keyup",B,false);s(G,"click",B,false)})},_toggleDropdown:function(D){if(D.innerHTML===p.openDropdown){D.innerHTML=p.closeDropdown}else{D.innerHTML=p.openDropdown}var C=D.parentNode,A=e(C.parentNode.parentNode,"dropdown");if(!e(D,"toggled")){m(D,"toggled");D.setAttribute("aria-expanded","true");var B=D.nextElementSibling;m(B,"toggled");m(k,"dropdown-active")}else{q(D,"toggled");D.setAttribute("aria-expanded","false");var B=D.nextElementSibling;q(B,"toggled");q(k,"dropdown-active")}},};return new n(f,h)};if(typeof module!=="undefined"&&module.exports){module.exports=c}else{d.responsiveNav=c}}(document,window,0));